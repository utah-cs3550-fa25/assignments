CS 3550 Assignment 3 (Models and Views)
=============================

**Status**: Phase 1 Final, Phase 2 Draft \
**Due**: Phase 1 due **19 Sep**. Phase 2--5 due **26 Sep**.

In this assignment, you write the back-end for the web pages you
developed in [Assignments 1](hw1.md) [and 2](hw2.md). That back-end
will automatically generate all web pages from a database, which we'll
initialize with dummy data. Specifically, you will:

- Create Django models for the recipe website data
- Query those models for the data that goes on each web page
- Generate those web pages' HTML based on that data

The assignment is due Friday, 26 September, before midnight. The
course's normal extension policy applies. Hand in your finished
assignment by pushing it to your repository on Github.

This assignment is intended take 6--8 hours and must be done solo. If
you get stuck for more than an hour or so, get help on Piazza or sign
up for an office hours slot.

All code you turn in must be yours. You cannot copying code from
sources on the internet, *including source code from live websites* or
generated by AI tools. You may discuss, plan, and confer with your
peers about how to do this assignment, or ask their help debugging
your code. However, any peers you do confer with must be listed on the
assignment cover sheet.

Phase 1: Setup
--------------

Create a Django application called `dishbook` by running:

    python3 manage.py startapp dishbook

As usual, you may need to use `python` or `py` instead of `python3`,
or give the full path to your Python executable, just as you did for
[Homework 1](hw1.md).

This command should succeed and create a directory called `dishbook`
with files inside it called `models.py`, `admin.py`, and `views.py`.
(It will also contain `tests.py`, which you won't need to touch.)

Open the `settings.py` file in your `cs3550` directory. Find the lines
that define `INSTALLED_APPS` and add the string `'dishbook'` to the
list. This means that the `dishbook` app you just created is now part
of the project.

Inside the `dishbook` directory create a subdirectory called
`templates`. Move all of the HTML files in `static` to this new
`templates` folder. (You can also delete `test.html`, if you still
have it.)

Open `views.py` in the `dishbook` directory and add the following line
to the top of the file:

    from . import models
    
Add the following lines to the bottom:

    def index(request):
        return render(request, "index.html")

Make similar definitions for the other four pages (`recipe`, `search`,
`profile`, and `signin`). Note that `login` is already a Django
function that we'll need later, so that function must be named
`signin`. For the `recipe` and `profile` view, the function should
take an additional parameter: `recipe_id` and `username`. Make sure
to use the correct function name and the correct template name.

Open the `urls.py` file in the `cs3550` directory and add the
following line to the top:

    from dishbook import views

Now add these entries to the `urlpatterns` list:

```python
path("", views.index),
path("profile/<str:username>", views.profile),
path("recipe/<int:recipe_id>", views.recipe),
path("s", views.search),
path("login/", views.signin),
```

If you get an `AttributeError`, make sure you defined all five methods
in `views.py` and you gave each of them the correct name.

You should now be able to run your server, visit the following URLs,
and see the results:

- http://localhost:8000/
- http://localhost:8000/profile/b
- http://localhost:8000/recipe/3
- http://localhost:8000/s?tag:comfort
- http://localhost:8000/login

If you see a `TypeError` check that your `profile` function has two
arguments (`request` and `username`) as does your `recipe` function
(`request`, `recipe_id`).

Once everything works, commit everything to Github, including the new
`dishbook` folder and the contents of the `migrations` and `templates`
folders inside it. If you have one **do not** commit your `db.sqlite3`
file. (This should happen by default, thanks to the `.gitignore` file
in the repository. If you accidentally do commit your database file,
delete it and commit again.) You should see the Github Action turn
green. If so, Phase 1 is done. If you do not, get help.
